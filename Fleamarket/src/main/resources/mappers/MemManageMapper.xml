<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="MemManageMapper">
	<cache />
	
	<!-- 회원 로그인  -->
	<select id="loginMember" parameterType="MemManageDTO" resultType="MemManageDTO">
		select * from member where member_email=#{member_email} and member_pw=#{member_pw}
	</select>
	
	<!-- 가입 -->
	<insert id="registerMember" parameterType="MemManageDTO">
		<![CDATA[
		insert into member(member_no, member_email, member_pw, member_name, member_phone, member_address, member_address2, member_admin)
		values( (select nvl(max(member_no)+1,1)from member), #{member_email}, 
		#{member_pw},#{member_name}, #{member_phone},#{member_address},#{member_address2}, 0 )
		]]>
	</insert>
	
	<!-- 상세보기 -->
	<select id="detailMember" parameterType="String" resultType="MemManageDTO">
		select * from member where member_email = #{member_email}
	</select>

	<!-- 회원정보수정 -->
	<update id="updateMember" parameterType="MemManageDTO">
	  update member set
		member_email=#{member_email}, member_pw=#{member_pw}, member_name=#{member_name}, member_phone=#{member_phone},
		member_address=#{member_address}, member_address2=#{member_address2} where member_email =#{member_email}

 
	</update>
	
	<!-- 회원탈퇴 -->
	<delete id="deleteMember" parameterType="MemManageDTO">
		delete from member where
		member_email = #{member_email}
	</delete>
	
<!-- 
	
 	<insert id="registerStore" parameterType="StoreDTO">
		insert into store(store_no, store_name, store_open_date)
		values((select nvl(max(store_no)+1,1)from store), #{store_name}, sysdate, )
	</insert> 
	
	랜덤 상정명 생성
	<update id="randomStore" parameterType="StoreDto">
		update store set
		store_name=#{store_name} where member_email =#{member_email}
	</update>
	
	상점 중복 확인
	<select id="listStore"  resultType="StoreDto">
		select * from store
	</select>
	
	아이디 중복 확인
	<select id="idCheck" resultType="MemManageDTO">
		select * from member where member_email = #{member_email}
	</select>

	삭제 고민좀 해야함 삭제가 아니라 업데이트식으로 하는 방법을 변경해야함

	-->
	
	
</mapper>
